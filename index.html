<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untuk Kamu ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&amp;family=Pacifico&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #ffe4e6; /* Pink lembut */
            overflow: hidden; /* Biar love yang terbang ga bikin scroll */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="%23ff69b4"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'), auto;
            transition: background-color 0.1s;
        }

        .font-handwriting {
            font-family: 'Pacifico', cursive;
        }

        /* Animasi Jedag Jedug (Flashy & Shaky) */
        @keyframes jedagJedug {
            0% { transform: scale(1) rotate(0deg); background-color: #ff0080; }
            25% { transform: scale(1.1) rotate(2deg); background-color: #ff69b4; }
            50% { transform: scale(1) rotate(-2deg); background-color: #ffffff; }
            75% { transform: scale(1.1) rotate(1deg); background-color: #ff1493; }
            100% { transform: scale(1) rotate(0deg); background-color: #ffe4e6; }
        }

        .jedag-jedug-active {
            animation: jedagJedug 0.5s infinite; /* Dipercepat untuk efek jedag jedug asli */
        }

        /* Animasi Floating Heart Background */
        .heart-bg {
            position: absolute;
            color: #ffb7b2;
            opacity: 0.3;
            animation: float 6s linear infinite;
            z-index: -1;
        }

        @keyframes float {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            50% { opacity: 0.6; }
            100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
        }

        /* Transisi halus */
        .page {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            display: none; /* Default hidden */
        }
        
        .page.active {
            display: flex;
            opacity: 1;
            transform: scale(1);
        }

        .btn-shadow {
            box-shadow: 0 4px 6px -1px rgba(255, 105, 180, 0.4), 0 2px 4px -1px rgba(255, 105, 180, 0.2);
            transition: all 0.2s;
        }

        .btn-shadow:active {
            transform: scale(0.95);
        }

        /* Efek confetti sederhana */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

        /* Cursor Trail Hearts */
        .cursor-heart {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            font-size: 20px;
            animation: fadeUp 1s forwards;
            z-index: 100;
        }

        @keyframes fadeUp {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -150%) scale(0.5); opacity: 0; }
        }
    </style>
</head>
<body class="h-screen w-screen flex items-center justify-center relative">

    <!-- Audio Elements -->
    <!-- Ganti URL src dengan link MP3 asli Anda -->
    <audio id="music-page2" src="https://github.com/Avesiena/AvesienaForSafina/blob/main/Romantic%20%26%20Piano%20(Free%20Music)%20-%20UNTIL%20WE%20MEET%20AGAIN%20by%20Arthur%20Vyncke.mp3" loop></audio>
    <audio id="music-page3" src="https://github.com/Avesiena/AvesienaForSafina/blob/main/happy%20song.m4a" loop></audio>
    <audio id="music-page4" src="https://github.com/Avesiena/AvesienaForSafina/blob/main/%23jedagjedug.mp3" loop></audio>

    <!-- Container Utama -->
    <div id="main-container" class="w-full max-w-md p-6 text-center relative z-10">
        
        <!-- Halaman 1: Intro -->
        <div id="page1" class="page active flex-col items-center gap-6">
            <h1 class="text-3xl font-handwriting text-pink-600 mb-2">Hai <span id="partner-name">Safina</span>! üëã</h1>
            <div class="rounded-2xl overflow-hidden border-4 border-white shadow-lg">
                <img src="https://github.com/Avesiena/AvesienaForSafina/blob/main/1.gif?raw=true" alt="Cute Bear Hello" class="w-48 h-48 object-cover">
            </div>
            <p class="text-lg text-gray-700 font-bold">Aku punya sesuatu nihhhh buat kamuuuu...</p>
            <button onclick="nextPage(1)" class="btn-shadow bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-8 rounded-full text-lg mt-4 animate-bounce">
                Apa tuh? ü§î
            </button>
        </div>

        <!-- Halaman 2: Rayuan -->
        <div id="page2" class="page flex-col items-center gap-6">
            <h1 class="text-2xl font-bold text-pink-500">Makasih yaaaaa</h1>
            <div class="rounded-2xl overflow-hidden border-4 border-white shadow-lg">
                <img src="https://github.com/Avesiena/AvesienaForSafina/blob/main/2.gif?raw=true" alt="Flower Bear" class="w-48 h-48 object-cover">
            </div>
            <p class="text-gray-600 text-xl">Makasih udah selalu dengerin dan saling cerita ke akuuuuu. I‚Äôm really happy and grateful for that! ü•∞</p>
            <button onclick="nextPage(2)" class="btn-shadow bg-red-400 hover:bg-red-500 text-white font-bold py-3 px-8 rounded-full text-lg mt-4">
                Lanjut üëâ
            </button>
        </div>

        <!-- Halaman 3: Pertanyaan Utama -->
        <div id="page3" class="page flex-col items-center gap-4 relative">
            <h1 class="text-3xl font-handwriting text-pink-600 mb-2">Safina, will you be my valentine? üåπ</h1>
            <div class="rounded-2xl overflow-hidden border-4 border-white shadow-lg mb-4">
                <img id="ask-gif" src="https://github.com/Avesiena/AvesienaForSafina/blob/main/3.gif?raw=true" alt="Please" class="w-48 h-48 object-cover">
            </div>
            
            <div class="md:flex justify-center items-center gap-4 mt-2 w-full relative h-20">
                <button id="btn-yes" onclick="acceptLove()" class="btn-shadow bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full text-xl z-20 transition-all duration-300">
                    MAUUUUUUUUUUUUUU! üòç
                </button>
                
                <button id="btn-no" onmouseover="moveButton()" onclick="moveButton()" class="btn-shadow bg-gray-300 text-gray-700 font-bold py-3 px-8 rounded-full text-xl z-10 transition-all duration-100 ease-out">
                    Enggak üòù
                </button>
            </div>
        </div>

        <!-- Halaman 4: Diterima -->
        <div id="page4" class="page flex-col items-center gap-6">
            <h1 class="text-4xl font-handwriting text-red-600 mb-2 drop-shadow-md">Happy Valentine's day, Safina! </h1>
            <div class="rounded-2xl overflow-hidden border-4 border-white shadow-2xl">
                <img src="https://github.com/Avesiena/AvesienaForSafina/blob/main/4.gif?raw=true" alt="Kiss" class="w-48 h-48 object-cover">
            </div>
            <p class="text-2xl text-pink-700 font-extrabold mt-4 uppercase tracking-widest">I Love You <span id="partner-name-final">Sayang</span>!</p>
            <p class="text-md text-gray-800 font-bold">Love, <span id="user-name-final">Avesiena</span> ‚ù§Ô∏è</p>
            <button onclick="stopJedagJedug()" class="mt-8 text-pink-600 underline text-sm font-bold">
                Berhenti Goyang! (Pusing)
            </button>
        </div>

    </div>

    <script>
        const btnNo = document.getElementById('btn-no');
        const btnYes = document.getElementById('btn-yes');
        const askGif = document.getElementById('ask-gif');
        let scaleSize = 1;

        // Music Control Logic
        const music2 = document.getElementById('music-page2');
        const music3 = document.getElementById('music-page3');
        const music4 = document.getElementById('music-page4');

        function stopAllMusic() {
            [music2, music3, music4].forEach(m => {
                m.pause();
                m.currentTime = 0;
            });
        }

        function playMusic(id) {
            stopAllMusic();
            const music = document.getElementById(id);
            if (music) {
                music.play().catch(e => console.log("Music play blocked by browser. Need interaction."));
            }
        }

        // --- LOGIKA NAMA DARI URL ---
        const urlParams = new URLSearchParams(window.location.search);
        const partnerName = urlParams.get('p') || 'Safina';
        const userName = urlParams.get('u') || 'Avesiena';

        document.getElementById('partner-name').innerText = partnerName;
        document.getElementById('partner-name-final').innerText = partnerName;
        document.getElementById('user-name-final').innerText = userName;

        // --- LOGIKA CURSOR TRAIL ---
        document.addEventListener('mousemove', (e) => createCursorHeart(e.clientX, e.clientY));
        document.addEventListener('touchmove', (e) => createCursorHeart(e.touches[0].clientX, e.touches[0].clientY));

        function createCursorHeart(x, y) {
            const heart = document.createElement('div');
            heart.classList.add('cursor-heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 1000);
        }

        // --- LOGIKA FLOATING HEARTS ---
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart-bg');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = Math.random() * 20 + 10 + 'px';
            heart.style.animationDuration = Math.random() * 3 + 2 + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }
        setInterval(createHeart, 300);

        // --- NAVIGASI ---
        function nextPage(currentPageIndex) {
            document.getElementById(`page${currentPageIndex}`).classList.remove('active');
            const nextIdx = currentPageIndex + 1;
            document.getElementById(`page${nextIdx}`).classList.add('active');
            
            // Ganti musik sesuai halaman
            if(nextIdx === 2) playMusic('music-page2');
            if(nextIdx === 3) playMusic('music-page3');
        }

        // --- BUTTON INTERACTION ---
        function moveButton() {
            scaleSize += 0.2;
            btnYes.style.transform = `scale(${scaleSize})`;
            btnNo.style.position = 'fixed'; 
            btnNo.style.left = `${Math.random() * (window.innerWidth - 100)}px`;
            btnNo.style.top = `${Math.random() * (window.innerHeight - 50)}px`;
        }

        // --- JEDAG JEDUG LOGIC ---
        function acceptLove() {
            createConfetti();
            document.body.classList.add('jedag-jedug-active');
            playMusic('music-page4'); // Musik khusus jedag jedug
            nextPage(3);
        }

        function stopJedagJedug() {
            document.body.classList.remove('jedag-jedug-active');
        }

        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff'];
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = Math.random() * 2 + 1 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }
    </script>
</body>
</html>
